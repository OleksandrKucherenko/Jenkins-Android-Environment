<?xml version="1.0" encoding="UTF-8"?>
<project name="{project-name}" default="help">
  <!-- 
  ================================= 
    Short overview of build steps 
  ================================= 
  -->
  
  <echo>Custom Rules: Build customization</echo>
  <echo>Allowed redefine of targets:</echo>
  <echo>-PRE-                         -POST-</echo>
  <echo>-pre-clean</echo>
  <echo>-pre-build</echo>
  <echo>-pre-compile</echo>
  <echo>                              -post-package</echo>
  <echo>                              -post-build</echo>
  
  <!--
  ================================= 
    target: -resolve-variables / Resolve critical to project variables
  ================================= 
  -->
  
  <target name="-resolve-variables">
    <echo>Resolving Build Target for ${ant.project.name}...</echo>
    <!-- load project properties, resolve Android target, library dependencies
	  and set some properties with the results.
	  All property names are passed as parameters ending in -Out -->
    <gettarget
	    androidJarFileOut="project.target.android.jar"
	    androidAidlFileOut="project.target.framework.aidl"
	    bootClassPathOut="project.target.class.path"
	    targetApiOut="project.target.apilevel"
	    minSdkVersionOut="project.minSdkVersion" />
    
    <echo>Resolving Dependencies for ${ant.project.name}...</echo>
    <dependency
	    libraryFolderPathOut="project.library.folder.path"
	    libraryPackagesOut="project.library.packages"
	    libraryManifestFilePathOut="project.library.manifest.file.path"
	    libraryResFolderPathOut="project.library.res.folder.path"
	    libraryBinAidlFolderPathOut="project.library.bin.aidl.folder.path"
	    libraryRFilePathOut="project.library.bin.r.file.path"
	    libraryNativeFolderPathOut="project.library.native.folder.path"
	    jarLibraryPathOut="project.all.jars.path"
	    targetApi="${project.target.apilevel}"
	    renderscriptSupportMode="${renderscript.support.mode}"
	    buildToolsFolder="${android.build.tools.dir}"
	    renderscriptSupportLibsOut="project.rs.support.libs.path"
	    verbose="${verbose}" />
  </target>
  
  <!-- 
  ================================= 
    INCLUDE CUSTOME TARGETS 
  ================================= 
  -->
  
  <import file="custom_rules_annotations.xml" optional="true" />
  <import file="custom_rules_findbugs.xml" optional="true" />
  <import file="custom_rules_checkstyle.xml" optional="true" />
  <import file="custom_rules_javadoc.xml" optional="true" />
  <import file="custom_rules_pmd.xml" optional="true" />
  <import file="custom_rules_javancss.xml" optional="true" />
  <import file="custom_rules_jcsc.xml" optional="true" />
  <!-- import file="custom_rules_.xml" optional="true" /-->
  <import file="custom_rules_manifest.xml" optional="true" />

  <!--
  ================================= 
    target: -pre-clean
  ================================= 
  -->
  
  <target name="-pre-clean">
  </target>
  
  <!--
  ================================= 
    target: -pre-build
  ================================= 
  -->
  
  <target name="-pre-build">
  </target>

  <!-- 
  ================================= 
    target: -post-package / ASK ANNOTAIONS TARGET TO DO THE JOB FOR US.          
  =================================
  -->
  
  <target name="-pre-compile">
    <!-- request android annotations build step --> 
    <antcall target="annotations"/>
  </target>
  
  <!--
  ================================= 
    target: -post-compile
  =================================
  -->
  <target name="-post-compile">
    <antcall target="pmd"/>
    <antcall target="javancss"/>
    <antcall target="jcsc"/>
    <antcall target="findbugs"/>
    <antcall target="checkstyle"/>
    <antcall target="javadoc"/>
  </target>
  
  <!--
  ================================= 
    target: -post-package / Define custom sign certificate
  =================================
  -->

  <target name="-post-package">
    <antcall target="set-project-name"/>
  
    <echo>POST-Package step</echo>
    <echo>-----------------</echo>
    <echo>Certificates Dir : ${certificates.dir}</echo>
    <echo>Company Keys     : ${company.keystore.path}</echo>
    <echo>File Name        : ${ant.project.name}</echo>
    <echo>Output file      : ${out.final.file}</echo>
    <echo>Build Target     : ${build.target}</echo>
    <echo>Path separator   : ${file.separator}</echo>
    
    <var name="out.final.file" value="${out.absolute.dir}${file.separator}${ant.project.name}-${build.target}.apk" />
    <echo>New Output file  : ${out.final.file}</echo>
    
  </target>
  
  <!--
  ================================= 
    target: -post-build
  ================================= 
  -->
  
  <target name="-post-build">
  </target>

  
</project>